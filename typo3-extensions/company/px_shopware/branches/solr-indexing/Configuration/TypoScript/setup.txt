plugin.tx_pxshopware {
    view {
        templateRootPaths {
            0 = {$plugin.tx_pxshopware.view.templateRootPath}
        }
        partialRootPaths {
            0 = {$plugin.tx_pxshopware.view.partialRootPath}
        }
        layoutRootPaths {
            0 = {$plugin.tx_pxshopware.view.layoutRootPath}
        }
    }

    persistence {
    }

    settings {
        # api configuration
        api {
            url = {$plugin.tx_pxshopware.settings.api.url}
            username = {$plugin.tx_pxshopware.settings.api.username}
            key = {$plugin.tx_pxshopware.settings.api.key}
        }
        # override global cache lifetime which is configured in extension configuration
        # the duration after which the item is updated via REST-API
        cacheLifeTime = {$plugin.tx_pxshopware.settings.cacheLifeTime}
        # fallback image if no image was given for article or other item
        noImage {
            path = {$plugin.tx_pxshopware.settings.noImage.path}
            filename = {$plugin.tx_pxshopware.settings.noImage.filename}
        }
    }
}

plugin.tx_pxshopware_pi1 = USER
plugin.tx_pxshopware_pi1 {
    userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
    pluginName = Pi1
    vendorName = Portrino
    extensionName = PxShopware
    controller = Article
    action = list
    settings =< plugin.tx_pxshopware.settings
    persistence =< plugin.tx_pxshopware.persistence
    view =< plugin.tx_pxshopware.view
}

plugin.tx_pxshopware_pi2 < plugin.tx_pxshopware_pi1
plugin.tx_pxshopware_pi2 {
    pluginName = Pi2
    controller = Category
}

module.tx_pxshopware < plugin.tx_pxshopware


    # add article and category indexing if ext:solr is loaded
[userFunc = \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::isLoaded(solr)]
    plugin.tx_solr {
        index {
            queue {
                Portrino\PxShopware\Domain\Model\Article = 1
                Portrino\PxShopware\Domain\Model\Article {
                    skipPreFetchFromDb = 1
                    indexer = Portrino\PxShopware\Service\Solr\Indexer\ArticleIndexer
                    indexer {
#                        option = value
                    }
                    fields {
                        url = pxShopwareUrl
                    }
                }

                Portrino\PxShopware\Domain\Model\Category = 1
                Portrino\PxShopware\Domain\Model\Category {
                    skipPreFetchFromDb = 1
                    indexer = Portrino\PxShopware\Service\Solr\Indexer\CategoryIndexer
                    indexer {
                        ignoredIds = 1,3,4,51
                    }
                    fields {
                        url = pxShopwareUrl
                    }
                }
            }
        }
    }
[global]